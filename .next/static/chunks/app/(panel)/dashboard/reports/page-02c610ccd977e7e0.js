(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{99579:function(e,t,a){Promise.resolve().then(a.bind(a,75203))},22252:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},73618:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},15863:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3085:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},70525:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},75203:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(57437),s=a(2265),i=a(15863),l=a(70525),n=a(3085);let d=(0,a(39763).Z)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);var o=a(31047),c=a(22252),m=a(73618),x=a(48736),u=a(5526),h=a(81838);function p(){var e;let[t,a]=(0,s.useState)([]),[p,g]=(0,s.useState)(!0),[f,y]=(0,s.useState)([]),[b,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(20),[k,w]=(0,s.useState)("dahil");(0,s.useEffect)(()=>{D(),y((0,h.dB)())},[]);let D=async()=>{try{g(!0);let{data:e}=await u.O.from("incomes").select("*").gt("tax_amount",0).order("date",{ascending:!1}),{data:t}=await u.O.from("expenses").select("*").gt("tax_amount",0).order("date",{ascending:!1}),r=[];if(e){let t=e.map(e=>({id:e.id,date:e.date,type:"Gelir",description:e.description||e.source,totalAmount:e.amount,taxRate:e.tax_rate||20,taxAmount:e.tax_amount,netAmount:e.amount-e.tax_amount}));r=[...r,...t]}if(t){let e=t.map(e=>({id:e.id,date:e.date,type:"Gider",description:e.description||e.recipient,totalAmount:e.amount,taxRate:e.tax_rate||20,taxAmount:e.tax_amount,netAmount:e.amount-e.tax_amount}));r=[...r,...e]}r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),a(r)}catch(e){console.error("Vergi kayıtları \xe7ekilemedi:",e)}finally{g(!1)}},F=t.filter(e=>"Gelir"===e.type).reduce((e,t)=>e+t.taxAmount,0),T=t.filter(e=>"Gider"===e.type).reduce((e,t)=>e+t.taxAmount,0),M=F-T,Y=t.filter(e=>"Gelir"===e.type).reduce((e,t)=>e+(t.netAmount||t.totalAmount-t.taxAmount),0),V=t.filter(e=>"Gider"===e.type).reduce((e,t)=>e+(t.netAmount||t.totalAmount-t.taxAmount),0),A=(0,h.Eu)(Y,V),Z=(()=>{let e=parseFloat(b)||0;if("dahil"===k){let t=e*N/(100+N);return{tax:t,net:e-t,total:e}}{let t=e*N/100;return{tax:t,net:e,total:e+t}}})();return p?(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Muhasebe & KDV Takibi"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Otomatik hesaplanan KDV raporlarınız. (Veriler Gelir ve Giderlerden \xe7ekilir)"})]})}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,r.jsx)(l.Z,{className:"w-24 h-24 text-green-500"})}),(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Hesaplanan KDV (Gelir)"}),(0,r.jsxs)("div",{className:"mt-2 text-3xl font-bold text-green-500",children:["₺",F.toLocaleString("tr-TR",{maximumFractionDigits:2})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"M\xfcşterilerden tahsil edilen"})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,r.jsx)(n.Z,{className:"w-24 h-24 text-red-500"})}),(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"İndirilecek KDV (Gider)"}),(0,r.jsxs)("div",{className:"mt-2 text-3xl font-bold text-red-500",children:["₺",T.toLocaleString("tr-TR",{maximumFractionDigits:2})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Fiş/Faturalardan d\xfcş\xfclen"})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl border shadow-sm relative overflow-hidden ".concat(M>0?"bg-orange-500/10 border-orange-200":"bg-green-500/10 border-green-200"),children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,r.jsx)(d,{className:"w-24 h-24 ".concat(M>0?"text-orange-500":"text-green-500")})}),(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:M>0?"\xd6denecek KDV":"Sonraki Aya Devreden"}),(0,r.jsxs)("div",{className:"mt-2 text-3xl font-bold ".concat(M>0?"text-orange-600":"text-green-600"),children:["₺",Math.abs(M).toLocaleString("tr-TR",{maximumFractionDigits:2})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"G\xfcncel k\xfcm\xfclatif denge"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5 text-primary"}),new Date().getFullYear()," Yılı \xd6zeti"]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-card border border-border shadow-sm",children:[(0,r.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Yıllık Hesaplanan KDV"}),(0,r.jsxs)("div",{className:"mt-1 text-2xl font-bold text-foreground",children:["₺",t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gelir"===e.type).reduce((e,t)=>e+t.taxAmount,0).toLocaleString("tr-TR",{maximumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-card border border-border shadow-sm",children:[(0,r.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Yıllık İndirilecek KDV"}),(0,r.jsxs)("div",{className:"mt-1 text-2xl font-bold text-foreground",children:["₺",t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gider"===e.type).reduce((e,t)=>e+t.taxAmount,0).toLocaleString("tr-TR",{maximumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-card border border-border shadow-sm",children:[(0,r.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Yıllık Net KDV Dengesi"}),(0,r.jsxs)("div",{className:"mt-1 text-2xl font-bold ".concat(t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gelir"===e.type).reduce((e,t)=>e+t.taxAmount,0)-t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gider"===e.type).reduce((e,t)=>e+t.taxAmount,0)>0?"text-orange-600":"text-green-600"),children:["₺",Math.abs(t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gelir"===e.type).reduce((e,t)=>e+t.taxAmount,0)-t.filter(e=>new Date(e.date).getFullYear()===new Date().getFullYear()&&"Gider"===e.type).reduce((e,t)=>e+t.taxAmount,0)).toLocaleString("tr-TR",{maximumFractionDigits:2})]})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5 text-primary"}),"Vergi Takvimi & Hatırlatmalar"]}),(0,r.jsx)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 rounded-xl border border-border shadow-sm flex flex-col justify-between ".concat(e.remainingDays<=7?"bg-red-500/5 border-red-200":"bg-card"),children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full ".concat("KDV"===e.type?"bg-purple-100 text-purple-600":"Ge\xe7ici"===e.type?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"),children:e.type}),(0,r.jsxs)("span",{className:"text-xs font-semibold ".concat(e.remainingDays<=7?"text-red-600":"text-muted-foreground"),children:[e.remainingDays," g\xfcn kaldı"]})]}),(0,r.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]}),(0,r.jsx)("div",{className:"mt-3 text-sm font-semibold opacity-80",children:new Intl.DateTimeFormat("tr-TR",{dateStyle:"medium"}).format(e.date)})]},t))}),(0,r.jsx)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-100 mt-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-blue-900 font-semibold font-base",children:"Tahmini Gelir/Ge\xe7ici Vergi Matrahı"}),(0,r.jsxs)("p",{className:"text-blue-700/80 text-sm mt-1",children:["Bu d\xf6nemki k\xe2rınız \xfczerinden ",(0,r.jsx)("strong",{children:"artan oranlı (dilimli)"})," tarife ile hesaplanan tahmini vergidir.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-xs opacity-75",children:"*2025 şahıs şirketi gelir vergisi dilimleri baz alınmıştır."})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-baseline gap-2",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-blue-800",children:["₺",A.tax.toLocaleString("tr-TR",{maximumFractionDigits:2})]}),(0,r.jsxs)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:["Ortalama Y\xfck: %",(null===(e=A.effectiveRate)||void 0===e?void 0:e.toFixed(1))||0]})]})]})]})})]}),(0,r.jsxs)("div",{className:"lg:col-span-1 rounded-xl bg-secondary/30 border border-border h-fit p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 text-primary"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Hızlı KDV Hesapla"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Tutar"}),(0,r.jsx)("input",{type:"number",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm",placeholder:"0.00",value:b,onChange:e=>j(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"KDV Oranı (%)"}),(0,r.jsxs)("select",{className:"w-full bg-background border rounded-lg px-3 py-2 text-sm",value:N,onChange:e=>v(Number(e.target.value)),children:[(0,r.jsx)("option",{value:1,children:"%1"}),(0,r.jsx)("option",{value:10,children:"%10"}),(0,r.jsx)("option",{value:20,children:"%20"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Hesaplama"}),(0,r.jsxs)("select",{className:"w-full bg-background border rounded-lg px-3 py-2 text-sm",value:k,onChange:e=>w(e.target.value),children:[(0,r.jsx)("option",{value:"dahil",children:"KDV Dahil"}),(0,r.jsx)("option",{value:"haric",children:"KDV Hari\xe7"})]})]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Matrah (Net):"}),(0,r.jsxs)("span",{className:"font-mono",children:["₺",Z.net.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-medium text-primary",children:[(0,r.jsx)("span",{children:"KDV Tutarı:"}),(0,r.jsxs)("span",{className:"font-mono",children:["₺",Z.tax.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-bold pt-2 border-t",children:[(0,r.jsx)("span",{children:"Toplam:"}),(0,r.jsxs)("span",{className:"font-mono",children:["₺",Z.total.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-2 rounded-xl border bg-card overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b bg-secondary/10 flex justify-between items-center",children:(0,r.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Son Vergi Hareketleri (Otomatik)"]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-secondary/50 text-muted-foreground font-medium",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3",children:"Tarih"}),(0,r.jsx)("th",{className:"px-4 py-3",children:"T\xfcr"}),(0,r.jsx)("th",{className:"px-4 py-3",children:"A\xe7ıklama"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right",children:"Tutar"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right",children:"Oran"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right",children:"KDV"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border",children:0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Hen\xfcz KDV i\xe7eren bir gelir veya gider kaydı bulunmuyor."})}):t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-secondary/30",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-muted-foreground",children:e.date}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("Gelir"===e.type?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:e.type})}),(0,r.jsx)("td",{className:"px-4 py-3 font-medium",children:e.description}),(0,r.jsxs)("td",{className:"px-4 py-3 text-right font-mono",children:["₺",e.totalAmount.toLocaleString()]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-right text-muted-foreground",children:["% ",e.taxRate]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-right font-mono font-medium",children:["₺",e.taxAmount.toLocaleString(void 0,{maximumFractionDigits:2})]})]},e.id))})]})})]})]})]})}},5526:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});let r=(0,a(13053).eI)("https://veyokbxkhyqaejautyva.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZleW9rYnhraHlxYWVqYXV0eXZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMTY2ODksImV4cCI6MjA4NTY5MjY4OX0.69XhSOD4tQnpZASl2rCngcVLfO_b68tQTI6K16S9dGY")},81838:function(e,t,a){"use strict";a.d(t,{Eu:function(){return s},dB:function(){return r}});let r=()=>{let e=new Date,t=e.getFullYear(),a=e.getMonth(),r=[],s=a,i=t;e.getDate()>28&&(s=a+1)>11&&(s=0,i++);let l=new Date(i,s,28);r.push({title:"".concat(new Intl.DateTimeFormat("tr-TR",{month:"long"}).format(l)," KDV Beyanı"),date:l,type:"KDV",description:"Aylık KDV beyannamesi ve \xf6demesi",remainingDays:Math.ceil((l.getTime()-e.getTime())/864e5)});let n=[new Date(t,4,17),new Date(t,7,17),new Date(t,10,17),new Date(t+1,1,17)],d=n.find(t=>t>e)||n[0];d<e&&d.setFullYear(t+1),r.push({title:"Ge\xe7ici Vergi D\xf6nemi",date:d,type:"Ge\xe7ici",description:"3 aylık kazan\xe7 \xfczerinden peşin vergi",remainingDays:Math.ceil((d.getTime()-e.getTime())/864e5)});let o=new Date(t,2,31);return e>o&&o.setFullYear(t+1),r.push({title:"Yıllık Gelir Vergisi (1. Taksit)",date:o,type:"Yıllık",description:"Yıllık kazan\xe7 vergisi beyanı ve ilk taksit",remainingDays:Math.ceil((o.getTime()-e.getTime())/864e5)}),r.sort((e,t)=>e.remainingDays-t.remainingDays)},s=(e,t)=>{let a=e-t;if(a<=0)return{tax:0,effectiveRate:0,bracket:0};let r=a,s=0,i=0,l=0;for(let e of[{limit:158e3,rate:.15},{limit:33e4,rate:.2},{limit:8e5,rate:.27},{limit:3e6,rate:.35},{limit:1/0,rate:.4}]){let t=Math.min(r,e.limit-i);if(t<=0||(s+=t*e.rate,r-=t,i=e.limit,l=e.rate,r<=0))break}return{tax:s,effectiveRate:s/a*100,bracket:100*l}}}},function(e){e.O(0,[537,971,117,744],function(){return e(e.s=99579)}),_N_E=e.O()}]);