(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{82915:function(e,t,s){Promise.resolve().then(s.bind(s,21789))},21789:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return J}});var a=s(57437),r=s(2265),n=s(73247),l=s(94766),i=s(98728);function d(){return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,a.jsx)("input",{type:"text",placeholder:"Ara...",className:"pl-9 pr-4 py-2 w-64 bg-secondary/50 border-none rounded-full text-sm focus:ring-2 focus:ring-primary/20 transition-all outline-none"})]}),(0,a.jsxs)("div",{className:"flex items-center ml-auto gap-2 border-l pl-4 dark:border-gray-800",children:[(0,a.jsxs)("button",{className:"p-2 rounded-full hover:bg-secondary transition-colors relative",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsx)("button",{className:"p-2 rounded-full hover:bg-secondary transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-muted-foreground"})})]})]})}var c=s(20265),o=s(15051),m=s(21047);function u(e){let{title:t,value:s,change:r,trend:n}=e;return(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:t}),(0,a.jsxs)("div",{className:"mt-2 flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-foreground",children:s}),(0,a.jsxs)("span",{className:"flex items-center text-sm font-medium ".concat((()=>{switch(n){case"up":return"text-green-500";case"down":return"text-red-500";default:return"text-gray-500"}})()),children:[(()=>{switch(n){case"up":return(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-1"});case"down":return(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"});default:return(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-1"})}})(),r]})]})]})}var x=s(47625),h=s(58336),f=s(56940),p=s(97059),g=s(62994),j=s(8147),b=s(22190),N=s(54061),w=s(15863);function v(e){let{data:t,isLoading:s}=e;return s?(0,a.jsx)("div",{className:"w-full h-[350px] flex items-center justify-center bg-secondary/10 rounded-lg",children:(0,a.jsx)(w.Z,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):t&&0!==t.length?(0,a.jsx)("div",{className:"w-full h-[350px]",children:(0,a.jsx)(x.h,{width:"100%",height:"100%",children:(0,a.jsxs)(h.w,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(f.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),(0,a.jsx)(p.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},dy:10}),(0,a.jsx)(g.B,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>"₺".concat(e)}),(0,a.jsx)(j.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:e=>["₺".concat(Number(e).toLocaleString()),void 0]}),(0,a.jsx)(b.D,{}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"revenue",name:"Gelir",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:{r:6,strokeWidth:0}}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"expense",name:"Gider",stroke:"#ef4444",strokeWidth:3,strokeDasharray:"5 5",dot:!1})]})})}):(0,a.jsx)("div",{className:"w-full h-[350px] flex items-center justify-center bg-secondary/10 rounded-lg text-muted-foreground",children:"Veri bulunamadı"})}var y=s(5526),k=s(646),S=s(2575),D=s(23689),Z=s(6496),I=s(50838),M=s(56739),O=s(26062),z=s(79778),L=s(39747),C=s(53285),E=s(6364),W=s(41415),Y=s(19979),A=s(38549),K=s(8971),T=s(39006),G=s(11112),U=s(56290),B=s(92451),F=s(10407);function J(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(new Date),[m,x]=(0,r.useState)(new Date),[h,f]=(0,r.useState)(new Date);(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{let[e,s]=await Promise.all([y.O.from("incomes").select("*"),y.O.from("expenses").select("*")]);t(e.data||[]),n(s.data||[])}catch(e){console.error("Error fetching dashboard data:",e)}finally{i(!1)}},g=e.reduce((e,t)=>e+Number(t.amount),0),j=s.reduce((e,t)=>e+Number(t.amount),0),b=g-j,N=e.length>0?g/e.length:0,w=[{title:"Toplam Gelir",value:"₺".concat(g.toLocaleString("tr-TR",{maximumFractionDigits:2})),change:"-",trend:"neutral"},{title:"Toplam Gider",value:"₺".concat(j.toLocaleString("tr-TR",{maximumFractionDigits:2})),change:"-",trend:"neutral"},{title:"Net Durum",value:"₺".concat(b.toLocaleString("tr-TR",{maximumFractionDigits:2})),change:"-",trend:b>=0?"up":"down"},{title:"Ortalama İşlem",value:"₺".concat(N.toLocaleString("tr-TR",{maximumFractionDigits:2})),change:"-",trend:"neutral"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Genel Bakış"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"İşletmenizin anlık durumunu buradan takip edebilirsiniz."})]}),(0,a.jsx)(d,{})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:w.map((e,t)=>(0,a.jsx)(u,{title:e.title,value:e.value,change:e.change,trend:e.trend},t))}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow-sm",children:[(0,a.jsxs)("div",{className:"p-6 flex items-center justify-between border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Haftalık Analiz"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-secondary/50 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>o((0,W.t)(c,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(B.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"min-w-[140px] text-center font-medium",children:[(0,I.WU)((0,k.z)(c,{weekStartsOn:1}),"d MMM",{locale:U.tr})," - ",(0,I.WU)((0,S.v)(c,{weekStartsOn:1}),"d MMM",{locale:U.tr})]}),(0,a.jsx)("button",{onClick:()=>o((0,Y.j)(c,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(v,{data:(()=>{let t=(0,k.z)(c,{weekStartsOn:1}),a=(0,S.v)(c,{weekStartsOn:1});return(0,D.D)({start:t,end:a}).map(t=>{let a=e.filter(e=>(0,Z.K)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0),r=s.filter(e=>(0,Z.K)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0);return{name:(0,I.WU)(t,"EEEE",{locale:U.tr}),revenue:a,expense:r}})})(),isLoading:l})})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow-sm",children:[(0,a.jsxs)("div",{className:"p-6 flex items-center justify-between border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Aylık Analiz (G\xfcnl\xfck)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-secondary/50 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>x((0,A.W)(m,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(B.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"min-w-[140px] text-center font-medium",children:(0,I.WU)(m,"MMMM yyyy",{locale:U.tr})}),(0,a.jsx)("button",{onClick:()=>x((0,K.z)(m,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(v,{data:(()=>{let t=(0,M.N)(m),a=(0,O.V)(m);return(0,D.D)({start:t,end:a}).map(t=>{let a=e.filter(e=>(0,Z.K)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0),r=s.filter(e=>(0,Z.K)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0);return{name:(0,I.WU)(t,"d"),revenue:a,expense:r}})})(),isLoading:l})})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow-sm",children:[(0,a.jsxs)("div",{className:"p-6 flex items-center justify-between border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Yıllık Analiz (Aylık)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-secondary/50 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>f((0,T.e)(h,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(B.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"min-w-[140px] text-center font-medium",children:(0,I.WU)(h,"yyyy",{locale:U.tr})}),(0,a.jsx)("button",{onClick:()=>f((0,G.B)(h,1)),className:"p-1 hover:bg-white rounded shadow-sm transition-all",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(v,{data:(()=>{let t=(0,z.e)(h),a=(0,L.w)(h);return(0,C.R)({start:t,end:a}).map(t=>{let a=e.filter(e=>(0,E.x)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0),r=s.filter(e=>(0,E.x)(new Date(e.date),t)).reduce((e,t)=>e+Number(t.amount),0);return{name:(0,I.WU)(t,"MMM",{locale:U.tr}),revenue:a,expense:r}})})(),isLoading:l})})]})]})]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(13053).eI)("https://veyokbxkhyqaejautyva.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZleW9rYnhraHlxYWVqYXV0eXZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMTY2ODksImV4cCI6MjA4NTY5MjY4OX0.69XhSOD4tQnpZASl2rCngcVLfO_b68tQTI6K16S9dGY")}},function(e){e.O(0,[537,962,555,971,117,744],function(){return e(e.s=82915)}),_N_E=e.O()}]);