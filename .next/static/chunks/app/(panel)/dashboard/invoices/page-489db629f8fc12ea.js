(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{55960:function(e,t,r){Promise.resolve().then(r.bind(r,13216))},22252:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},48736:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},45675:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},99397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},13216:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(57437),s=r(2265),n=r(39763);let i=(0,n.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),l=(0,n.Z)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),d=(0,n.Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),o=(0,n.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var c=r(48736),m=r(99397);let u=(0,n.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var x=r(22252),h=r(45675),y=r(18930);let p=(0,n.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=r(5526);let g=e=>{let{category:t}=e;switch(t){case"Enerji":return(0,a.jsx)(i,{className:"w-5 h-5 text-yellow-500"});case"Su":return(0,a.jsx)(l,{className:"w-5 h-5 text-blue-500"});case"İletişim":return(0,a.jsx)(d,{className:"w-5 h-5 text-purple-500"});case"Kira":return(0,a.jsx)(o,{className:"w-5 h-5 text-orange-500"});default:return(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-500"})}};function b(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1),[d,o]=(0,s.useState)(null),[b,j]=(0,s.useState)({name:"",provider:"",amount:"",dayOfMonth:"",category:"Diğer",autoPay:!1});(0,s.useEffect)(()=>{v()},[]);let v=async()=>{try{let{data:e,error:r}=await f.O.from("recurring_expenses").select("*").order("day_of_month",{ascending:!0});if(r)throw r;if(e){let r=e.map(e=>({id:e.id,name:e.name,provider:e.provider,amount:Number(e.amount),dayOfMonth:e.day_of_month,category:e.category,status:e.status,autoPay:e.auto_pay,lastPaidDate:e.last_paid_date}));t(r)}}catch(e){console.error("Error fetching recurring expenses:",e)}finally{n(!1)}},N=e.reduce((e,t)=>e+t.amount,0),k=e.filter(e=>"\xd6dendi"===e.status).reduce((e,t)=>e+t.amount,0),w=e=>{switch(e){case"\xd6dendi":return"bg-green-500/10 text-green-500 border-green-500/20";case"Gecikti":return"bg-red-500/10 text-red-500 border-red-500/20";case"Yaklaşıyor":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";default:return"bg-secondary text-muted-foreground border-transparent"}},_=async r=>{if(confirm("Bu faturayı bu ay i\xe7in \xf6dendi olarak işaretlemek ve gidere işlemek istiyor musunuz?"))try{let a=new Date().toISOString().split("T")[0],{error:s}=await f.O.from("recurring_expenses").update({status:"\xd6dendi",last_paid_date:a}).eq("id",r.id);if(s)throw s;let{error:n}=await f.O.from("expenses").insert([{amount:r.amount,recipient:r.provider,category:r.category,date:a,description:"".concat(r.name," (Fatura \xd6demesi)"),payment_method:"Nakit"}]);if(n)throw n;t(e.map(e=>e.id===r.id?{...e,status:"\xd6dendi",lastPaidDate:a}:e))}catch(e){console.error("Error marking invoice as paid:",e),alert("İşlem sırasında bir hata oluştu.")}},M=async r=>{if(confirm("Bu sabit gideri silmek istediğinize emin misiniz?"))try{let{error:a}=await f.O.from("recurring_expenses").delete().eq("id",r);if(a)throw a;t(e.filter(e=>e.id!==r))}catch(e){console.error("Error deleting expense:",e),alert("Silme sırasında hata oluştu.")}},Z=e=>{o(e.id),j({name:e.name,provider:e.provider,amount:e.amount.toString(),dayOfMonth:e.dayOfMonth.toString(),category:e.category,autoPay:e.autoPay}),l(!0)},O=async r=>{r.preventDefault();try{let r=parseFloat(b.amount),a=parseInt(b.dayOfMonth);if(d){let{data:s,error:n}=await f.O.from("recurring_expenses").update({name:b.name,provider:b.provider,amount:r,day_of_month:a,category:b.category,auto_pay:b.autoPay}).eq("id",d).select();if(n)throw n;if(s){let r={id:s[0].id,name:s[0].name,provider:s[0].provider,amount:Number(s[0].amount),dayOfMonth:s[0].day_of_month,category:s[0].category,status:s[0].status,autoPay:s[0].auto_pay,lastPaidDate:s[0].last_paid_date};t(e.map(e=>e.id===d?r:e))}}else{let{data:s,error:n}=await f.O.from("recurring_expenses").insert([{name:b.name,provider:b.provider,amount:r,day_of_month:a,category:b.category,auto_pay:b.autoPay,status:"Bekliyor"}]).select();if(n)throw n;if(s){let r={id:s[0].id,name:s[0].name,provider:s[0].provider,amount:Number(s[0].amount),dayOfMonth:s[0].day_of_month,category:s[0].category,status:s[0].status,autoPay:s[0].auto_pay,lastPaidDate:s[0].last_paid_date};t([...e,r])}}l(!1),o(null),j({name:"",provider:"",amount:"",dayOfMonth:"",category:"Diğer",autoPay:!1})}catch(e){console.error("Error saving recurring expense:",e),alert("İşlem sırasında hata oluştu.")}},S=(e,t)=>{j(r=>({...r,[e]:t}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Faturalar & Sabit Giderler"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Her ay tekrarlanan d\xfczenli \xf6demelerinizi buradan y\xf6netin."})]}),(0,a.jsxs)("button",{onClick:()=>{o(null),j({name:"",provider:"",amount:"",dayOfMonth:"",category:"Diğer",autoPay:!1}),l(!0)},className:"bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),"Yeni Sabit Gider"]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Aylık Tahmini Toplam"}),(0,a.jsxs)("h3",{className:"text-2xl font-bold mt-2",children:["₺",N.toLocaleString()]})]}),(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary"})})]}),(0,a.jsx)("div",{className:"mt-4 w-full bg-secondary rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:"100%"}})})]}),(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Bu Ay \xd6denen"}),(0,a.jsxs)("h3",{className:"text-2xl font-bold mt-2 text-green-500",children:["₺",k.toLocaleString()]})]}),(0,a.jsx)("div",{className:"p-2 bg-green-500/10 rounded-lg",children:(0,a.jsx)(u,{className:"w-5 h-5 text-green-500"})})]}),(0,a.jsx)("div",{className:"mt-4 w-full bg-secondary rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:"".concat(N>0?k/N*100:0,"%")}})})]}),(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Kalan \xd6deme"}),(0,a.jsxs)("h3",{className:"text-2xl font-bold mt-2 text-yellow-500",children:["₺",(N-k).toLocaleString()]})]}),(0,a.jsx)("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-yellow-500"})})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-muted-foreground",children:"3 fatura \xf6deme bekliyor"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.map(e=>(0,a.jsxs)("div",{className:"group relative bg-card border border-border rounded-xl p-6 hover:shadow-md transition-all hover:border-primary/50",children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>Z(e),className:"text-muted-foreground hover:text-blue-500 transition-colors",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e.id),className:"text-muted-foreground hover:text-red-500 transition-colors",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,a.jsx)(g,{category:e.category})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.provider})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Son \xd6deme G\xfcn\xfc"}),(0,a.jsxs)("span",{className:"font-medium flex items-center gap-1",children:[(0,a.jsx)(p,{className:"w-3 h-3"}),"Her ayın ",e.dayOfMonth,"'i"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Tutar (Tahmini)"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:["₺",e.amount.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"px-3 py-2 rounded-lg border text-sm flex items-center justify-between ".concat(w(e.status)),children:[(0,a.jsx)("span",{className:"font-medium",children:e.status}),"\xd6dendi"===e.status&&(0,a.jsx)(u,{className:"w-4 h-4"}),"Yaklaşıyor"===e.status&&(0,a.jsx)("span",{className:"text-xs opacity-75",children:"3 g\xfcn kaldı"})]}),"\xd6dendi"!==e.status?(0,a.jsx)("button",{onClick:()=>_(e),className:"w-full py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"\xd6dendi Olarak İşaretle"}):(0,a.jsx)("button",{className:"w-full py-2 bg-secondary text-muted-foreground rounded-lg font-medium cursor-not-allowed opacity-50",children:"Bu Ay \xd6dendi"})]})]},e.id)),(0,a.jsxs)("button",{onClick:()=>l(!0),className:"border-2 border-dashed border-border rounded-xl p-6 flex flex-col items-center justify-center gap-3 text-muted-foreground hover:border-primary hover:text-primary hover:bg-secondary/10 transition-colors min-h-[250px]",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-medium",children:"Yeni D\xfczenli Gider Ekle"})]})]}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-background border border-border rounded-xl shadow-2xl w-full max-w-lg p-6 animate-in fade-in zoom-in duration-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:d?"Sabit Gider D\xfczenle":"Yeni Sabit Gider Ekle"}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"İsim"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 bg-secondary/50 rounded-lg border-none focus:ring-2 focus:ring-primary/20 outline-none",placeholder:"\xd6rn: Kira",value:b.name,onChange:e=>S("name",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Sağlayıcı / Kişi"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-secondary/50 rounded-lg border-none focus:ring-2 focus:ring-primary/20 outline-none",placeholder:"\xd6rn: Ahmet Yılmaz",value:b.provider,onChange:e=>S("provider",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Tutar (Tahmini)"}),(0,a.jsx)("input",{type:"number",required:!0,className:"w-full px-3 py-2 bg-secondary/50 rounded-lg border-none focus:ring-2 focus:ring-primary/20 outline-none",placeholder:"0.00",value:b.amount,onChange:e=>S("amount",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"\xd6deme G\xfcn\xfc (1-31)"}),(0,a.jsx)("input",{type:"number",required:!0,min:"1",max:"31",className:"w-full px-3 py-2 bg-secondary/50 rounded-lg border-none focus:ring-2 focus:ring-primary/20 outline-none",value:b.dayOfMonth,onChange:e=>S("dayOfMonth",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Kategori"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 bg-secondary/50 rounded-lg border-none focus:ring-2 focus:ring-primary/20 outline-none",value:b.category,onChange:e=>S("category",e.target.value),children:[(0,a.jsx)("option",{value:"Diğer",children:"Diğer"}),(0,a.jsx)("option",{value:"Enerji",children:"Enerji (Elektrik/Gaz)"}),(0,a.jsx)("option",{value:"Su",children:"Su"}),(0,a.jsx)("option",{value:"İletişim",children:"İletişim (İnternet/Tel)"}),(0,a.jsx)("option",{value:"Kira",children:"Kira"}),(0,a.jsx)("option",{value:"Vergi",children:"Vergi"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"autoPay",className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary",checked:b.autoPay,onChange:e=>S("autoPay",e.target.checked)}),(0,a.jsx)("label",{htmlFor:"autoPay",className:"text-sm font-medium text-muted-foreground cursor-pointer select-none",children:"Otomatik \xd6deme Talimatı Var"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{l(!1),o(null)},className:"px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-secondary rounded-lg transition-colors",children:"İptal"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg transition-colors",children:d?"G\xfcncelle":"Kaydet"})]})]})]})})]})}},5526:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(13053).eI)("https://veyokbxkhyqaejautyva.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZleW9rYnhraHlxYWVqYXV0eXZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMTY2ODksImV4cCI6MjA4NTY5MjY4OX0.69XhSOD4tQnpZASl2rCngcVLfO_b68tQTI6K16S9dGY")}},function(e){e.O(0,[537,971,117,744],function(){return e(e.s=55960)}),_N_E=e.O()}]);